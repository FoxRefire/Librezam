<html>
    <head>
        <link href="/libs/material-icons/material-icons.css" rel="stylesheet">
        <link rel="stylesheet" href="/libs/materialize/materialize.min.css"/>
        <link href="popup.css" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>
    <body>
        <!-- NavBar -->
        <nav class="nav navbar">
            <div class="nav-wrapper">
                <a class="brand-logo center">Settings</a>
                <a href="/popup/guess.html"><i class="material-icons back_button">arrow_back</i></a>
            </div>
        </nav>

        <!-- Fallback Rules Section -->
        <div class="section" id="fallbackRulesSection">
            <h5>Recognition Rules</h5>
            <p class="grey-text text-darken-1" style="margin-top: -8px;">
                Define recording lengths (ms) and the backend order to try when recognition fails.
            </p>
            <a href="/popup/apiSettings.html">API Settings</a>
            <div id="fallbackRulesContainer" class="fallback-rules-container"></div>
            <div style="margin-top: 10px; display: flex; gap: 8px; flex-wrap: wrap;">
                <button id="addFallbackRule" class="btn filled icon-left"><i class="material-icons">add</i>Add Rule</button>
                <button id="resetFallbackRules" class="btn-flat">Reset to Default</button>
            </div>
        </div>

        <form action="#">
            <h5>Show coverart on recognized</h5>
            <p>
                <label>
                    <input id="isShowCoverart" type="checkbox" class="filled-in"/>
                    <span>Enable</span>
                </label>
            </p>
        </form>

        <div class="bg-selection">
            <h5>Theme</h5>
            <div class="bg-opt-container">
                <div class="bg-opt" style="background-image: none;"></div>
                <div class="bg-opt" style="background-image: url('/images/background-2.jpg');"></div>
                <div class="bg-opt" style="background-image: url('/images/background-3.jpg');"></div>
                <div class="bg-opt" style="background-image: url('/images/background-4.jpg');"></div>
            </div>
        </div>

        <a tabindex="0" id="exportHistories" class="btn filled icon-left"><i class="material-icons">save_as</i>Export as CSV</a>
        <button tabindex="0" popovertarget="modalConfirmClear" class="btn filled icon-left modal-trigger"><i class="material-icons">delete_forever</i>Clear Histories</button>
        <div id="modalConfirmClear" class="modal" popover>
            <div class="modal-content">
                <h4>Confirm</h4>
                <p>Are you sure to clear histories?</p>
            </div>
            <div class="modal-footer">
                <button tabindex="0" popovertarget="modalConfirmClear" class="waves-effect btn-flat">No</button>
                <button tabindex="0" id="clearConfirmed" popovertarget="modalConfirmClear" class="waves-effect btn-flat">Yes</button>
            </div>
        </div>

        <script src="/libs/materialize/materialize.min.js"></script>
        <script src="./settings.js" type="module"></script>
    </body>
</html>
