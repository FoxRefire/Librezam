@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
    --brand-color: #0088FF;
    --background-color: #FFFFFF;
    --surface-color: #F8F8F8;
    --text-primary: #222222;
    --text-secondary: #555555;
    --card-background: #FFFFFF;
    --shadow-color: rgba(0, 0, 0, 0.1);
    --menu-bg: #FFFFFF;
    /* Updated gradient as requested by user */
    --header-gradient: linear-gradient(135deg, #047AFF 0%, #006AFF 100%);
}

body {
    width: 350px;
    height: 520px;
    margin: 0;
    padding: 0;
    background-color: var(--background-color);
    /* Mac-style font stack with Inter as primary */
    /* font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; */
    font-family: -apple-system, "Inter", BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: var(--text-primary);
    overflow-y: auto;
    /* Mac-style rendering/intensity */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-weight: 500; /* Slight intensity boost globally */
}

body.main {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* Header & Navigation */
#surfaceContainer {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: var(--header-gradient);
    position: sticky;
    top: 0;
    z-index: 100;
    padding-bottom: 30px;
    box-shadow: 0 4px 12px rgba(0, 136, 255, 0.2);
}

#menuButton {
    position: absolute;
    right: 15px;
    top: 15px;
    font-size: 28px !important;
    color: #FFFFFF;
    cursor: pointer;
    transition: opacity 0.2s;
    opacity: 0.9;
    z-index: 1002; /* Ensure above backdrop */
}

#menuButton:hover {
    opacity: 1;
}

/* Dropdown & Backdrop */
#menuBackdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    backdrop-filter: blur(4px); /* The "Fog" effect */
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

#menuBackdrop.active {
    opacity: 1;
    pointer-events: auto;
}

#dropdownMenu {
    top: 60px !important; /* Slightly lower */
    right: 15px !important;
    left: auto !important;
    width: 260px !important;
    border-radius: 16px; /* Smooth corners */
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    border: 1px solid rgba(255,255,255,0.1);
    background-color: var(--menu-bg) !important;
    overflow: hidden;
    position: fixed !important;
    z-index: 1001 !important;
    transform-origin: top right;
    transform: scale(0.8) translateY(-20px);
    opacity: 0;
    display: block !important;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Materialize uses display:block/none. We utilize a class to override if needed,
   but since we hook into openStart, let's trust Materialize for display
   BUT we want our animation overrides. */

.dropdown-content {
    background-color: var(--menu-bg) !important;
}

/* Animation state when active (Materialize adds display block, we handle opacity/transform) */
/* Actually Materialize handles opacity. We want to override it to be smoother. */
/* We will toggle a class .menu-visible on the dropdown via JS */

#dropdownMenu.menu-visible {
    visibility: visible;
    opacity: 1;
    transform: scale(1) translateY(0);
}

.dropdown-content li {
    min-height: 50px;
}

/* Common style for links and the label in the menu */
.dropdown-content li > a,
.dropdown-content li > label {
    color: var(--text-primary) !important;
    font-size: 16px;
    padding: 16px 24px !important;
    display: flex;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
    cursor: pointer;
    /* transition: background-color 0.2s; */
}


.dropdown-content li > a:hover,
.dropdown-content li:hover > label {
    /* "Golden Brooch" Polish: Clean, distinct, premium blue gradient */
    background: linear-gradient(90deg, rgba(225, 241, 255, 0.9) 0%, rgba(200, 230, 255, 0.6) 100%) !important;
    box-shadow: 0 2px 8px rgba(0, 136, 255, 0.1);
    transform: translateX(2px) scale(1.01);
    border-radius: 8px; /* Smooth rounded corners for items */
    margin: 2px 5px; /* Slight spacing so they float */
    width: calc(100% - 10px) !important; /* Adjust width for margin */
}


.dropdown-content li > a > i,
.dropdown-content li > label > i {
    color: var(--brand-color) !important;
    margin-right: 16px !important;
    font-size: 22px;
    transition: transform 0.2s;
}

.dropdown-content li:hover > a > i,
.dropdown-content li:hover > label > i {
    transform: scale(1.1);
}

.dropdown-content li > label > span {
    color: var(--text-primary) !important;
    font-size: 16px;
}

/* Checkbox specific overrides */
[type="checkbox"].filled-in:checked + span:not(.lever):after {
    border: 2px solid var(--brand-color);
    background-color: var(--brand-color);
}

.dropdown-content li.divider {
    background-color: #EEE !important;
    margin: 4px 0 !important;
}

/* Main Recognition UI */
#circler {
    margin-top: 10px; /* Moved UP significantly as requested */
    width: 90px !important; /* Slightly larger */
    height: 90px !important;
    border-radius: 50%; /* Ensure perfectly circular */
    /* Remove static shadow, let animation handle it or keep subtle one */
}

.spinner-blue-only {
    border-color: #FFFFFF;
    border-width: 4px;
}

/* Notification Text */
#notification {
    margin-top: 25px;
    font-size: 14px; /* Reduced from 18px */
    font-weight: 600;
    text-align: center;
    min-height: 24px;
    color: #FFFFFF;
    text-shadow: 0 1px 3px rgba(0,0,0,0.15);
    animation: textPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes textPop {
    0% { transform: scale(0.8); opacity: 0; }
    60% { transform: scale(1.2); } /* Much bigger pop */
    100% { transform: scale(1); opacity: 1; }
}

/* Ensure no dark backgrounds on menu items initially */
.dropdown-content,
.dropdown-content li,
.dropdown-content li > a,
.dropdown-content li > label {
    background-color: transparent !important;
    background: transparent !important;
}

/* Streaming Links - Consolidated Container */
#streamProviders {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 40px;
    padding: 0 20px;
    flex-wrap: wrap;
    padding-bottom: 25px;
}

#streamProviders a img {
    width: 42px;
    height: 42px;
    border-radius: 8px; /* Slight radius looks cleaner */
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    background-color: rgba(255, 255, 255, 0.1); /* Subtle backing */
    padding: 4px;
}

#streamProviders a:hover img {
    transform: translateY(-5px) scale(1.1);
    background-color: rgba(255, 255, 255, 0.25);
    box-shadow: 0 6px 12px rgba(0,0,0,0.2);
}

/* Result Table */
#resultTable {
    margin-top: 40px;
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

#resultTable td {
    padding: 12px 0;
    font-size: 16px;
    color: #FFFFFF !important; /* Force White */
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

#resultTable td:first-child {
    font-weight: 600;
    color: rgba(255, 255, 255, 0.8) !important;
    width: 70px;
}

#resultTable a {
    color: #FFFFFF !important;
    text-decoration: none;
    font-weight: 700;
    border-bottom: 1px solid rgba(255,255,255,0.5);
}

#resultTable a:hover {
    border-bottom-color: #FFFFFF;
}

/* Removed Duplicate #streamProviders block that was here */

/* Pulsing Animation - INTENSIFIED */
@keyframes heartbeat {
    0% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
    }
    70% {
        transform: scale(1);
        box-shadow: 0 0 0 20px rgba(255, 255, 255, 0);
    }
    100% {
        transform: scale(0.95);
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
    }
}

.pulsing-icon {
    width: 100%; /* Fill the circler container */
    height: 100%;
    animation: heartbeat 2s infinite;
    border-radius: 50%;
    background-color: #FFF; /* Make sure it has a body */
    /* If the image itself is the icon, we might need a wrapper for the ring,
       but let's try applying shadow to the img/icon itself which usually works if round.
       If icon.png is transparent, box-shadow might be square.
       Let's assume the user wants the "ripple" effect. */
    box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
}
#historyControls {
    display: flex;
    justify-content: center;
    gap: 15px;
    padding: 15px 0;
    background-color: #FAFAFA;
    border-bottom: 1px solid #EEE;
    border-top: 1px solid #EEE;
}

#historyControls button {
    background: none;
    box-shadow: none;
    color: var(--text-secondary);
    font-weight: 600;
    font-size: 13px;
    text-transform: uppercase;
    padding: 6px 16px;
    border-radius: 20px;
    transition: all 0.2s;
}

#historyControls button:hover {
    background-color: rgba(0, 136, 255, 0.1);
    color: var(--brand-color);
}

.history-cards-container {
    padding: 0 15px 15px 15px;
    background-color: #FFFFFF;
}

.history-card {
    background-color: #FFFFFF;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s, box-shadow 0.2s;
    border: 1px solid #F0F0F0;
}

.history-card:hover {
    transform: translateY(-3px) scale(1.01);
    box-shadow: 0 8px 25px rgba(0, 136, 255, 0.2);
    border-color: rgba(0, 136, 255, 0.5);
    background: linear-gradient(135deg, #ffffff 0%, #cae2f7ca 100%) !important;
}

.history-card-header {
    display: flex;
    align-items: center;
}

.history-card-cover {
    width: 56px;
    height: 56px;
    border-radius: 6px;
    background-size: cover;
    background-position: center;
    margin-right: 16px;
    background-color: #F8F8F8;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.history-card-main-info {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.history-card-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-card-artist {
    font-size: 14px;
    color: var(--text-secondary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.history-card-date {
    display: none;
}

.history-card-actions {
    margin-left: 12px;
    display: flex;
    gap: 8px;
    align-items: center;
}

.history-card-btn {
    background: transparent;
    border: none;
    color: #CCC;
    padding: 8px;
    cursor: pointer;
    border-radius: 50%;
    transition: all 0.2s;
}

.history-card-btn:hover {
    color: var(--brand-color);
    background-color: #F0F8FF;
}

.history-card-icon {
    font-size: 20px;
}

.history-card-album {
    display: none;
}

hr {
    border: none;
    height: 1px;
    background-color: #EEE;
    margin: 15px 0;
}

/* Settings Overrides for Light Theme */
nav.navbar {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border-bottom: 1px solid #EEE !important;
}

nav .brand-logo, nav .back_button {
    color: var(--brand-color) !important;
}

.input-field #recordLength,
body a[class="btn filled icon-left modal-trigger"],
#addFallbackRule,
.fallback-backends-list .chip {
    border-color: #EEE !important;
    background-color: #FAFAFA !important;
    color: var(--text-primary) !important;
}

#resultTable td {
    color: var(--text-primary) !important;
}

/* CSS :has override removed to ensure blue header persists */

/* When result table is shown, we might simply want the white bg back on header if users prefer that,
   but for now following "home screen" instruction, we keep the blue header potentially?
   Actually, usually Shazam creates a "Result Card".
   Let's keep the Blue Header for the LISTENING state, but purely Blue.
   When result shows, maybe it stays blue?
   Let's leave #surfaceContainer as Blue Gradient.
*/


